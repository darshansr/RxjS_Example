(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"37h8":function(l,n,t){"use strict";t.r(n);var u=t("8Y7J"),e=t("DQLy");const r=Object(e.w)("products"),o=Object(e.y)(r,l=>l.showProductCode),c=Object(e.y)(r,l=>l.currentProductId),s=Object(e.y)(r,c,(l,n)=>0===n?{id:0,productName:"",productCode:"New",description:"",starRating:0}:n?l.products.find(l=>l.id===n):null),a=Object(e.y)(r,l=>l.products),i=Object(e.y)(r,l=>l.error);var d=function(l){return l.ToggleProductCode="[Product] Toggle Product Code",l.SetCurrentProduct="[Product] Set Current Product",l.ClearCurrentProduct="[Product] Clear Current Product",l.InitializeCurrentProduct="[Product] Initialize Current Product",l.Load="[Product] Load",l.LoadSuccess="[Product] Load Success",l.LoadFail="[Product] Load Fail",l.UpdateProduct="[Product] Update Product",l.UpdateProductSuccess="[Product] Update Product Success",l.UpdateProductFail="[Product] Update Product Fail",l.CreateProduct="[Product] Create Product",l.CreateProductSuccess="[Product] Create Product Success",l.CreateProductFail="[Product] Create Product Fail",l.DeleteProduct="[Product] Delete Product",l.DeleteProductSuccess="[Product] Delete Product Success",l.DeleteProductFail="[Product] Delete Product Fail",l}({});class p{constructor(l){this.payload=l,this.type=d.ToggleProductCode}}class b{constructor(l){this.payload=l,this.type=d.SetCurrentProduct}}class g{constructor(){this.type=d.ClearCurrentProduct}}class h{constructor(){this.type=d.InitializeCurrentProduct}}class m{constructor(){this.type=d.Load}}class P{constructor(l){this.payload=l,this.type=d.LoadSuccess}}class f{constructor(l){this.payload=l,this.type=d.LoadFail}}class v{constructor(l){this.payload=l,this.type=d.UpdateProduct}}class y{constructor(l){this.payload=l,this.type=d.UpdateProductSuccess}}class C{constructor(l){this.payload=l,this.type=d.UpdateProductFail}}class O{constructor(l){this.payload=l,this.type=d.CreateProduct}}class j{constructor(l){this.payload=l,this.type=d.CreateProductSuccess}}class k{constructor(l){this.payload=l,this.type=d.CreateProductFail}}class w{constructor(l){this.payload=l,this.type=d.DeleteProduct}}class I{constructor(l){this.payload=l,this.type=d.DeleteProductSuccess}}class B{constructor(l){this.payload=l,this.type=d.DeleteProductFail}}class q{constructor(l){this.store=l}ngOnInit(){this.store.dispatch(new m),this.products$=this.store.pipe(Object(e.z)(a)),this.errorMessage$=this.store.pipe(Object(e.z)(i)),this.selectedProduct$=this.store.pipe(Object(e.z)(s)),this.displayCode$=this.store.pipe(Object(e.z)(o))}checkChanged(l){this.store.dispatch(new p(l))}newProduct(){this.store.dispatch(new h)}productSelected(l){this.store.dispatch(new b(l))}deleteProduct(l){this.store.dispatch(new w(l.id))}clearProduct(){this.store.dispatch(new g)}saveProduct(l){this.store.dispatch(new O(l))}updateProduct(l){this.store.dispatch(new v(l))}}class S{}var M=t("pMnS"),D=t("SVse");class F{constructor(){this.pageTitle="Products",this.checked=new u.m,this.initializeNewProduct=new u.m,this.selected=new u.m}checkChanged(l){this.checked.emit(l)}newProduct(){this.initializeNewProduct.emit()}productSelected(l){this.selected.emit(l)}}var $=u.pb({encapsulation:0,styles:[[".card-body[_ngcontent-%COMP%]{padding:0}"]],data:{}});function N(l){return u.Jb(0,[(l()(),u.rb(0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),u.Hb(1,null,[" (",") "]))],null,function(l,n){l(n,1,0,n.parent.context.$implicit.productCode)})}function E(l){return u.Jb(0,[(l()(),u.rb(0,0,null,null,6,"button",[["class","list-group-item list-group-item-action rounded-0"]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.productSelected(l.context.$implicit)&&u),u},null,null)),u.Eb(512,null,D.r,D.s,[u.r,u.s,u.k,u.D]),u.qb(2,278528,null,0,D.i,[D.r],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),u.Db(3,{active:0}),(l()(),u.Hb(4,null,[""," "])),(l()(),u.gb(16777216,null,null,1,null,N)),u.qb(6,16384,null,0,D.k,[u.O,u.L],{ngIf:[0,"ngIf"]},null)],function(l,n){var t=n.component,u=l(n,3,0,(null==n.context.$implicit?null:n.context.$implicit.id)===(null==t.selectedProduct?null:t.selectedProduct.id));l(n,2,0,"list-group-item list-group-item-action rounded-0",u),l(n,6,0,t.displayCode)},function(l,n){l(n,4,0,n.context.$implicit.productName)})}function A(l){return u.Jb(0,[(l()(),u.rb(0,0,null,null,3,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),u.rb(1,0,null,null,2,"div",[["class","list-group"]],null,null,null,null,null)),(l()(),u.gb(16777216,null,null,1,null,E)),u.qb(3,278528,null,0,D.j,[u.O,u.L,u.r],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,3,0,n.component.products)},null)}function L(l){return u.Jb(0,[(l()(),u.rb(0,0,null,null,1,"div",[["class","alert alert-danger"]],null,null,null,null,null)),(l()(),u.Hb(1,null,[" Error: ","\n"]))],null,function(l,n){l(n,1,0,n.component.errorMessage)})}function H(l){return u.Jb(0,[(l()(),u.rb(0,0,null,null,13,"div",[["class","card"]],null,null,null,null,null)),(l()(),u.rb(1,0,null,null,1,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),u.Hb(2,null,[" "," "])),(l()(),u.gb(16777216,null,null,1,null,A)),u.qb(4,16384,null,0,D.k,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.rb(5,0,null,null,8,"div",[["class","card-footer"]],null,null,null,null,null)),(l()(),u.rb(6,0,null,null,7,"div",[["class","row"]],null,null,null,null,null)),(l()(),u.rb(7,0,null,null,3,"div",[["class","form-check col-md-7"]],null,null,null,null,null)),(l()(),u.rb(8,0,null,null,2,"label",[],null,null,null,null,null)),(l()(),u.rb(9,0,null,null,0,"input",[["class","form-check-input"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(l,n,t){var u=!0;return"change"===n&&(u=!1!==l.component.checkChanged(t.target.checked)&&u),u},null,null)),(l()(),u.Hb(-1,null,[" Display Product Code "])),(l()(),u.rb(11,0,null,null,2,"div",[["class","col-md-4 text-right"]],null,null,null,null,null)),(l()(),u.rb(12,0,null,null,1,"button",[["class","btn btn-primary"]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.newProduct()&&u),u},null,null)),(l()(),u.Hb(-1,null,[" Add "])),(l()(),u.gb(16777216,null,null,1,null,L)),u.qb(15,16384,null,0,D.k,[u.O,u.L],{ngIf:[0,"ngIf"]},null)],function(l,n){var t=n.component;l(n,4,0,t.products),l(n,15,0,t.errorMessage)},function(l,n){var t=n.component;l(n,2,0,t.pageTitle),l(n,9,0,t.displayCode)})}var R=t("s7LF");class U{constructor(l){this.validationMessages=l}processMessages(l){const n={};for(const t in l.controls)if(l.controls.hasOwnProperty(t)){const u=l.controls[t];if(u instanceof R.f){const l=this.processMessages(u);Object.assign(n,l)}else this.validationMessages[t]&&(n[t]="",(u.dirty||u.touched)&&u.errors&&Object.keys(u.errors).map(l=>{this.validationMessages[t][l]&&(n[t]+=this.validationMessages[t][l]+" ")}))}return n}}class x{static range(l,n){return t=>t.value&&(isNaN(t.value)||t.value<l||t.value>n)?{range:!0}:null}}class J{constructor(l){this.fb=l,this.pageTitle="Product Edit",this.create=new u.m,this.update=new u.m,this.delete=new u.m,this.clearCurrent=new u.m,this.componentActive=!0,this.displayMessage={},this.validationMessages={productName:{required:"Product name is required.",minlength:"Product name must be at least three characters.",maxlength:"Product name cannot exceed 50 characters."},productCode:{required:"Product code is required."},starRating:{range:"Rate the product between 1 (lowest) and 5 (highest)."}},this.genericValidator=new U(this.validationMessages)}ngOnInit(){this.productForm=this.fb.group({productName:["",[R.r.required,R.r.minLength(3),R.r.maxLength(50)]],productCode:["",R.r.required],starRating:["",x.range(1,5)],description:""}),this.productForm.valueChanges.subscribe(l=>this.displayMessage=this.genericValidator.processMessages(this.productForm))}ngOnChanges(l){l.selectedProduct&&this.displayProduct(l.selectedProduct.currentValue)}ngOnDestroy(){this.componentActive=!1}blur(){this.displayMessage=this.genericValidator.processMessages(this.productForm)}displayProduct(l){this.product=l,this.product&&this.productForm&&(this.productForm.reset(),this.pageTitle=0===this.product.id?"Add Product":`Edit Product: ${this.product.productName}`,this.productForm.patchValue({productName:this.product.productName,productCode:this.product.productCode,starRating:this.product.starRating,description:this.product.description}))}cancelEdit(){this.displayProduct(this.product)}deleteProduct(){this.product&&this.product.id?confirm(`Really delete the product: ${this.product.productName}?`)&&this.delete.emit(this.product):this.clearCurrent.emit()}saveProduct(){if(this.productForm.valid){if(this.productForm.dirty){const l=Object.assign({},this.product,this.productForm.value);0===l.id?this.create.emit(l):this.update.emit(l)}}else this.errorMessage="Please correct the validation errors."}}var T=u.pb({encapsulation:0,styles:[[""]],data:{}});function z(l){return u.Jb(0,[(l()(),u.rb(0,0,null,null,1,"span",[["class","invalid-feedback"]],null,null,null,null,null)),(l()(),u.Hb(1,null,[" "," "]))],null,function(l,n){l(n,1,0,n.component.displayMessage.productName)})}function _(l){return u.Jb(0,[(l()(),u.rb(0,0,null,null,1,"span",[["class","invalid-feedback"]],null,null,null,null,null)),(l()(),u.Hb(1,null,[" "," "]))],null,function(l,n){l(n,1,0,n.component.displayMessage.productCode)})}function V(l){return u.Jb(0,[(l()(),u.rb(0,0,null,null,1,"span",[["class","invalid-feedback"]],null,null,null,null,null)),(l()(),u.Hb(1,null,[" "," "]))],null,function(l,n){l(n,1,0,n.component.displayMessage.starRating)})}function G(l){return u.Jb(0,[(l()(),u.rb(0,0,null,null,1,"span",[["class","invalid-feedback"]],null,null,null,null,null)),(l()(),u.Hb(1,null,[" "," "]))],null,function(l,n){l(n,1,0,n.component.displayMessage.description)})}function Y(l){return u.Jb(0,[(l()(),u.rb(0,0,null,null,81,"div",[["class","card"]],null,null,null,null,null)),(l()(),u.rb(1,0,null,null,1,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),u.Hb(2,null,[" "," "])),(l()(),u.rb(3,0,null,null,78,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),u.rb(4,0,null,null,77,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(l,n,t){var e=!0,r=l.component;return"submit"===n&&(e=!1!==u.Bb(l,6).onSubmit(t)&&e),"reset"===n&&(e=!1!==u.Bb(l,6).onReset()&&e),"ngSubmit"===n&&(e=!1!==r.saveProduct()&&e),e},null,null)),u.qb(5,16384,null,0,R.v,[],null,null),u.qb(6,540672,null,0,R.g,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),u.Eb(2048,null,R.b,null,[R.g]),u.qb(8,16384,null,0,R.m,[[4,R.b]],null,null),(l()(),u.rb(9,0,null,null,72,"fieldset",[],null,null,null,null,null)),(l()(),u.rb(10,0,null,null,14,"div",[["class","form-group row"]],null,null,null,null,null)),(l()(),u.rb(11,0,null,null,1,"label",[["class","col-md-3 col-form-label"],["for","productNameId"]],null,null,null,null,null)),(l()(),u.Hb(-1,null,["Product Name"])),(l()(),u.rb(13,0,null,null,11,"div",[["class","col-md-9"]],null,null,null,null,null)),(l()(),u.rb(14,0,null,null,8,"input",[["class","form-control"],["formControlName","productName"],["id","productNameId"],["placeholder","Name (required)"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"blur"],[null,"input"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,t){var e=!0,r=l.component;return"input"===n&&(e=!1!==u.Bb(l,18)._handleInput(t.target.value)&&e),"blur"===n&&(e=!1!==u.Bb(l,18).onTouched()&&e),"compositionstart"===n&&(e=!1!==u.Bb(l,18)._compositionStart()&&e),"compositionend"===n&&(e=!1!==u.Bb(l,18)._compositionEnd(t.target.value)&&e),"blur"===n&&(e=!1!==r.blur()&&e),e},null,null)),u.Eb(512,null,D.r,D.s,[u.r,u.s,u.k,u.D]),u.qb(16,278528,null,0,D.i,[D.r],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),u.Db(17,{"is-invalid":0}),u.qb(18,16384,null,0,R.c,[u.D,u.k,[2,R.a]],null,null),u.Eb(1024,null,R.j,function(l){return[l]},[R.c]),u.qb(20,671744,null,0,R.e,[[3,R.b],[8,null],[8,null],[6,R.j],[2,R.u]],{name:[0,"name"]},null),u.Eb(2048,null,R.k,null,[R.e]),u.qb(22,16384,null,0,R.l,[[4,R.k]],null,null),(l()(),u.gb(16777216,null,null,1,null,z)),u.qb(24,16384,null,0,D.k,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.rb(25,0,null,null,14,"div",[["class","form-group row"]],null,null,null,null,null)),(l()(),u.rb(26,0,null,null,1,"label",[["class","col-md-3 col-form-label"],["for","productCodeId"]],null,null,null,null,null)),(l()(),u.Hb(-1,null,["Product Code"])),(l()(),u.rb(28,0,null,null,11,"div",[["class","col-md-9"]],null,null,null,null,null)),(l()(),u.rb(29,0,null,null,8,"input",[["class","form-control"],["formControlName","productCode"],["id","productCodeId"],["placeholder","Code (required)"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"blur"],[null,"input"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,t){var e=!0,r=l.component;return"input"===n&&(e=!1!==u.Bb(l,33)._handleInput(t.target.value)&&e),"blur"===n&&(e=!1!==u.Bb(l,33).onTouched()&&e),"compositionstart"===n&&(e=!1!==u.Bb(l,33)._compositionStart()&&e),"compositionend"===n&&(e=!1!==u.Bb(l,33)._compositionEnd(t.target.value)&&e),"blur"===n&&(e=!1!==r.blur()&&e),e},null,null)),u.Eb(512,null,D.r,D.s,[u.r,u.s,u.k,u.D]),u.qb(31,278528,null,0,D.i,[D.r],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),u.Db(32,{"is-invalid":0}),u.qb(33,16384,null,0,R.c,[u.D,u.k,[2,R.a]],null,null),u.Eb(1024,null,R.j,function(l){return[l]},[R.c]),u.qb(35,671744,null,0,R.e,[[3,R.b],[8,null],[8,null],[6,R.j],[2,R.u]],{name:[0,"name"]},null),u.Eb(2048,null,R.k,null,[R.e]),u.qb(37,16384,null,0,R.l,[[4,R.k]],null,null),(l()(),u.gb(16777216,null,null,1,null,_)),u.qb(39,16384,null,0,D.k,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.rb(40,0,null,null,14,"div",[["class","form-group row"]],null,null,null,null,null)),(l()(),u.rb(41,0,null,null,1,"label",[["class","col-md-3 col-form-label"],["for","starRatingId"]],null,null,null,null,null)),(l()(),u.Hb(-1,null,["Star Rating (1-5)"])),(l()(),u.rb(43,0,null,null,11,"div",[["class","col-md-9"]],null,null,null,null,null)),(l()(),u.rb(44,0,null,null,8,"input",[["class","form-control"],["formControlName","starRating"],["id","starRatingId"],["placeholder","Rating"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,t){var e=!0;return"input"===n&&(e=!1!==u.Bb(l,48)._handleInput(t.target.value)&&e),"blur"===n&&(e=!1!==u.Bb(l,48).onTouched()&&e),"compositionstart"===n&&(e=!1!==u.Bb(l,48)._compositionStart()&&e),"compositionend"===n&&(e=!1!==u.Bb(l,48)._compositionEnd(t.target.value)&&e),e},null,null)),u.Eb(512,null,D.r,D.s,[u.r,u.s,u.k,u.D]),u.qb(46,278528,null,0,D.i,[D.r],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),u.Db(47,{"is-invalid":0}),u.qb(48,16384,null,0,R.c,[u.D,u.k,[2,R.a]],null,null),u.Eb(1024,null,R.j,function(l){return[l]},[R.c]),u.qb(50,671744,null,0,R.e,[[3,R.b],[8,null],[8,null],[6,R.j],[2,R.u]],{name:[0,"name"]},null),u.Eb(2048,null,R.k,null,[R.e]),u.qb(52,16384,null,0,R.l,[[4,R.k]],null,null),(l()(),u.gb(16777216,null,null,1,null,V)),u.qb(54,16384,null,0,D.k,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.rb(55,0,null,null,15,"div",[["class","form-group row"]],null,null,null,null,null)),(l()(),u.rb(56,0,null,null,1,"label",[["class","col-md-3 col-form-label"],["for","descriptionId"]],null,null,null,null,null)),(l()(),u.Hb(-1,null,["Description"])),(l()(),u.rb(58,0,null,null,12,"div",[["class","col-md-9"]],null,null,null,null,null)),(l()(),u.rb(59,0,null,null,9,"textarea",[["class","form-control"],["formControlName","description"],["id","descriptionId"],["placeholder","Description"],["rows","3"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,t){var e=!0;return"input"===n&&(e=!1!==u.Bb(l,63)._handleInput(t.target.value)&&e),"blur"===n&&(e=!1!==u.Bb(l,63).onTouched()&&e),"compositionstart"===n&&(e=!1!==u.Bb(l,63)._compositionStart()&&e),"compositionend"===n&&(e=!1!==u.Bb(l,63)._compositionEnd(t.target.value)&&e),e},null,null)),u.Eb(512,null,D.r,D.s,[u.r,u.s,u.k,u.D]),u.qb(61,278528,null,0,D.i,[D.r],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),u.Db(62,{"is-invalid":0}),u.qb(63,16384,null,0,R.c,[u.D,u.k,[2,R.a]],null,null),u.Eb(1024,null,R.j,function(l){return[l]},[R.c]),u.qb(65,671744,null,0,R.e,[[3,R.b],[8,null],[8,null],[6,R.j],[2,R.u]],{name:[0,"name"]},null),u.Eb(2048,null,R.k,null,[R.e]),u.qb(67,16384,null,0,R.l,[[4,R.k]],null,null),(l()(),u.Hb(-1,null,["            "])),(l()(),u.gb(16777216,null,null,1,null,G)),u.qb(70,16384,null,0,D.k,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.rb(71,0,null,null,10,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),u.rb(72,0,null,null,9,"div",[["class","col-md-10 col-md-offset-2"]],null,null,null,null,null)),(l()(),u.rb(73,0,null,null,2,"span",[],null,null,null,null,null)),(l()(),u.rb(74,0,null,null,1,"button",[["class","btn btn-primary"],["style","width:80px;margin-right:10px"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(l()(),u.Hb(-1,null,[" Save "])),(l()(),u.rb(76,0,null,null,2,"span",[],null,null,null,null,null)),(l()(),u.rb(77,0,null,null,1,"button",[["class","btn btn-light"],["style","width:80px;margin-right:10px"],["type","button"]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.cancelEdit()&&u),u},null,null)),(l()(),u.Hb(-1,null,[" Cancel "])),(l()(),u.rb(79,0,null,null,2,"span",[],null,null,null,null,null)),(l()(),u.rb(80,0,null,null,1,"button",[["class","btn btn-light"],["style","width:80px"],["type","button"]],null,[[null,"click"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.deleteProduct()&&u),u},null,null)),(l()(),u.Hb(-1,null,[" Delete "]))],function(l,n){var t=n.component;l(n,6,0,t.productForm);var u=l(n,17,0,t.displayMessage.productName);l(n,16,0,"form-control",u),l(n,20,0,"productName"),l(n,24,0,t.displayMessage.productName);var e=l(n,32,0,t.displayMessage.productCode);l(n,31,0,"form-control",e),l(n,35,0,"productCode"),l(n,39,0,t.displayMessage.productCode);var r=l(n,47,0,t.displayMessage.starRating);l(n,46,0,"form-control",r),l(n,50,0,"starRating"),l(n,54,0,t.displayMessage.starRating);var o=l(n,62,0,t.displayMessage.description);l(n,61,0,"form-control",o),l(n,65,0,"description"),l(n,70,0,t.displayMessage.description)},function(l,n){var t=n.component;l(n,2,0,t.pageTitle),l(n,4,0,u.Bb(n,8).ngClassUntouched,u.Bb(n,8).ngClassTouched,u.Bb(n,8).ngClassPristine,u.Bb(n,8).ngClassDirty,u.Bb(n,8).ngClassValid,u.Bb(n,8).ngClassInvalid,u.Bb(n,8).ngClassPending),l(n,14,0,u.Bb(n,22).ngClassUntouched,u.Bb(n,22).ngClassTouched,u.Bb(n,22).ngClassPristine,u.Bb(n,22).ngClassDirty,u.Bb(n,22).ngClassValid,u.Bb(n,22).ngClassInvalid,u.Bb(n,22).ngClassPending),l(n,29,0,u.Bb(n,37).ngClassUntouched,u.Bb(n,37).ngClassTouched,u.Bb(n,37).ngClassPristine,u.Bb(n,37).ngClassDirty,u.Bb(n,37).ngClassValid,u.Bb(n,37).ngClassInvalid,u.Bb(n,37).ngClassPending),l(n,44,0,u.Bb(n,52).ngClassUntouched,u.Bb(n,52).ngClassTouched,u.Bb(n,52).ngClassPristine,u.Bb(n,52).ngClassDirty,u.Bb(n,52).ngClassValid,u.Bb(n,52).ngClassInvalid,u.Bb(n,52).ngClassPending),l(n,59,0,u.Bb(n,67).ngClassUntouched,u.Bb(n,67).ngClassTouched,u.Bb(n,67).ngClassPristine,u.Bb(n,67).ngClassDirty,u.Bb(n,67).ngClassValid,u.Bb(n,67).ngClassInvalid,u.Bb(n,67).ngClassPending),l(n,74,0,!t.productForm.valid||!t.productForm.dirty)})}function Z(l){return u.Jb(0,[(l()(),u.rb(0,0,null,null,1,"div",[["class","alert alert-danger"]],null,null,null,null,null)),(l()(),u.Hb(1,null,[" Error: ","\n"]))],null,function(l,n){l(n,1,0,n.component.errorMessage)})}function Q(l){return u.Jb(0,[(l()(),u.gb(16777216,null,null,1,null,Y)),u.qb(1,16384,null,0,D.k,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.gb(16777216,null,null,1,null,Z)),u.qb(3,16384,null,0,D.k,[u.O,u.L],{ngIf:[0,"ngIf"]},null)],function(l,n){var t=n.component;l(n,1,0,t.product),l(n,3,0,t.errorMessage)},null)}var W=u.pb({encapsulation:2,styles:[],data:{}});function K(l){return u.Jb(2,[(l()(),u.rb(0,0,null,null,12,"div",[["class","row"]],null,null,null,null,null)),(l()(),u.rb(1,0,null,null,6,"div",[["class","col-md-4"]],null,null,null,null,null)),(l()(),u.rb(2,0,null,null,5,"pm-product-list",[],null,[[null,"checked"],[null,"initializeNewProduct"],[null,"selected"]],function(l,n,t){var u=!0,e=l.component;return"checked"===n&&(u=!1!==e.checkChanged(t)&&u),"initializeNewProduct"===n&&(u=!1!==e.newProduct()&&u),"selected"===n&&(u=!1!==e.productSelected(t)&&u),u},H,$)),u.qb(3,49152,null,0,F,[],{errorMessage:[0,"errorMessage"],products:[1,"products"],displayCode:[2,"displayCode"],selectedProduct:[3,"selectedProduct"]},{checked:"checked",initializeNewProduct:"initializeNewProduct",selected:"selected"}),u.Cb(131072,D.b,[u.h]),u.Cb(131072,D.b,[u.h]),u.Cb(131072,D.b,[u.h]),u.Cb(131072,D.b,[u.h]),(l()(),u.rb(8,0,null,null,4,"div",[["class","col-md-8"]],null,null,null,null,null)),(l()(),u.rb(9,0,null,null,3,"pm-product-edit",[],null,[[null,"clearCurrent"],[null,"update"],[null,"delete"],[null,"create"]],function(l,n,t){var u=!0,e=l.component;return"clearCurrent"===n&&(u=!1!==e.clearProduct()&&u),"update"===n&&(u=!1!==e.updateProduct(t)&&u),"delete"===n&&(u=!1!==e.deleteProduct(t)&&u),"create"===n&&(u=!1!==e.saveProduct(t)&&u),u},Q,T)),u.qb(10,770048,null,0,J,[R.d],{errorMessage:[0,"errorMessage"],selectedProduct:[1,"selectedProduct"]},{create:"create",update:"update",delete:"delete",clearCurrent:"clearCurrent"}),u.Cb(131072,D.b,[u.h]),u.Cb(131072,D.b,[u.h])],function(l,n){var t=n.component;l(n,3,0,u.Ib(n,3,0,u.Bb(n,4).transform(t.errorMessage$)),u.Ib(n,3,1,u.Bb(n,5).transform(t.products$)),u.Ib(n,3,2,u.Bb(n,6).transform(t.displayCode$)),u.Ib(n,3,3,u.Bb(n,7).transform(t.selectedProduct$))),l(n,10,0,u.Ib(n,10,0,u.Bb(n,11).transform(t.errorMessage$)),u.Ib(n,10,1,u.Bb(n,12).transform(t.selectedProduct$)))},null)}function X(l){return u.Jb(0,[(l()(),u.rb(0,0,null,null,1,"ng-component",[],null,null,null,K,W)),u.qb(1,114688,null,0,q,[e.o],null,null)],function(l,n){l(n,1,0)},null)}var ll=u.nb("ng-component",q,X,{},{},[]),nl=t("PCNd"),tl=t("iInd");const ul={showProductCode:!0,currentProductId:null,products:[],error:""};function el(l=ul,n){switch(n.type){case d.ToggleProductCode:return Object.assign({},l,{showProductCode:n.payload});case d.SetCurrentProduct:return Object.assign({},l,{currentProductId:n.payload.id});case d.ClearCurrentProduct:return Object.assign({},l,{currentProductId:null});case d.InitializeCurrentProduct:return Object.assign({},l,{currentProductId:0});case d.LoadSuccess:return Object.assign({},l,{products:n.payload,error:""});case d.LoadFail:return Object.assign({},l,{products:[],error:n.payload});case d.UpdateProductSuccess:const t=l.products.map(l=>n.payload.id===l.id?n.payload:l);return Object.assign({},l,{products:t,currentProductId:n.payload.id,error:""});case d.UpdateProductFail:return Object.assign({},l,{error:n.payload});case d.CreateProductSuccess:return Object.assign({},l,{products:[...l.products,n.payload],currentProductId:n.payload.id,error:""});case d.CreateProductFail:return Object.assign({},l,{error:n.payload});case d.DeleteProductSuccess:return Object.assign({},l,{products:l.products.filter(l=>l.id!==n.payload),currentProductId:null,error:""});case d.DeleteProductFail:return Object.assign({},l,{error:n.payload});default:return l}}function rl(l,n,t,u){var e,r=arguments.length,o=r<3?n:null===u?u=Object.getOwnPropertyDescriptor(n,t):u;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(l,n,t,u);else for(var c=l.length-1;c>=0;c--)(e=l[c])&&(o=(r<3?e(o):r>3?e(n,t,o):e(n,t))||o);return r>3&&o&&Object.defineProperty(n,t,o),o}var ol=t("LRne"),cl=t("5+tZ"),sl=t("lJxs"),al=t("JIr8"),il=t("Yml6");let dl=(()=>{class l{constructor(l,n){this.productService=l,this.actions$=n,this.loadProducts$=this.actions$.pipe(Object(il.d)(d.Load),Object(cl.a)(l=>this.productService.getProducts().pipe(Object(sl.a)(l=>new P(l)),Object(al.a)(l=>Object(ol.a)(new f(l)))))),this.updateProduct$=this.actions$.pipe(Object(il.d)(d.UpdateProduct),Object(sl.a)(l=>l.payload),Object(cl.a)(l=>this.productService.updateProduct(l).pipe(Object(sl.a)(l=>new y(l)),Object(al.a)(l=>Object(ol.a)(new C(l)))))),this.createProduct$=this.actions$.pipe(Object(il.d)(d.CreateProduct),Object(sl.a)(l=>l.payload),Object(cl.a)(l=>this.productService.createProduct(l).pipe(Object(sl.a)(l=>new j(l)),Object(al.a)(l=>Object(ol.a)(new k(l)))))),this.deleteProduct$=this.actions$.pipe(Object(il.d)(d.DeleteProduct),Object(sl.a)(l=>l.payload),Object(cl.a)(l=>this.productService.deleteProduct(l).pipe(Object(sl.a)(()=>new I(l)),Object(al.a)(l=>Object(ol.a)(new B(l))))))}}return rl([Object(il.b)()],l.prototype,"loadProducts$",void 0),rl([Object(il.b)()],l.prototype,"updateProduct$",void 0),rl([Object(il.b)()],l.prototype,"createProduct$",void 0),rl([Object(il.b)()],l.prototype,"deleteProduct$",void 0),l})();var pl=t("IheW"),bl=t("z6cu"),gl=t("vkgz");let hl=(()=>{class l{constructor(l){this.http=l,this.productsUrl="api/products"}getProducts(){return this.http.get(this.productsUrl).pipe(Object(gl.a)(l=>console.log(JSON.stringify(l))),Object(al.a)(this.handleError))}createProduct(l){const n=new pl.g({"Content-Type":"application/json"}),t=Object.assign({},l,{id:null});return this.http.post(this.productsUrl,t,{headers:n}).pipe(Object(gl.a)(l=>console.log("createProduct: "+JSON.stringify(l))),Object(al.a)(this.handleError))}deleteProduct(l){const n=new pl.g({"Content-Type":"application/json"});return this.http.delete(`${this.productsUrl}/${l}`,{headers:n}).pipe(Object(gl.a)(n=>console.log("deleteProduct: "+l)),Object(al.a)(this.handleError))}updateProduct(l){const n=new pl.g({"Content-Type":"application/json"});return this.http.put(`${this.productsUrl}/${l.id}`,l,{headers:n}).pipe(Object(gl.a)(()=>console.log("updateProduct: "+l.id)),Object(sl.a)(()=>l),Object(al.a)(this.handleError))}handleError(l){let n;return n=l.error instanceof ErrorEvent?`An error occurred: ${l.error.message}`:`Backend returned code ${l.status}: ${l.body.error}`,console.error(l),Object(bl.a)(n)}}return l.ngInjectableDef=u.Nb({factory:function(){return new l(u.Ob(pl.c))},token:l,providedIn:"root"}),l})();t.d(n,"ProductModuleNgFactory",function(){return ml});var ml=u.ob(S,[],function(l){return u.zb([u.Ab(512,u.j,u.Z,[[8,[M.a,ll]],[3,u.j],u.x]),u.Ab(4608,D.m,D.l,[u.t,[2,D.u]]),u.Ab(4608,R.t,R.t,[]),u.Ab(4608,R.d,R.d,[]),u.Ab(1073742336,D.c,D.c,[]),u.Ab(1073742336,R.s,R.s,[]),u.Ab(1073742336,R.h,R.h,[]),u.Ab(1073742336,R.p,R.p,[]),u.Ab(1073742336,nl.a,nl.a,[]),u.Ab(1073742336,tl.o,tl.o,[[2,tl.t],[2,tl.k]]),u.Ab(1024,e.G,function(){return[{}]},[]),u.Ab(1024,e.k,function(){return[{key:"products",reducerFactory:e.u,metaReducers:[],initialState:void 0}]},[]),u.Ab(1024,e.H,e.N,[u.q,e.G,e.k]),u.Ab(1024,e.F,function(){return[el]},[]),u.Ab(1024,e.I,function(l){return[l]},[e.F]),u.Ab(1024,e.b,function(l,n,t){return[e.O(l,n,t)]},[u.q,e.F,e.I]),u.Ab(1073873408,e.p,e.p,[e.H,e.b,e.h,e.q]),u.Ab(512,dl,dl,[hl,il.a]),u.Ab(1024,il.i,function(l){return[il.e(l)]},[dl]),u.Ab(1073742336,il.g,il.g,[il.f,il.i,[2,e.q],[2,e.p]]),u.Ab(1073742336,S,S,[]),u.Ab(1024,tl.i,function(){return[[{path:"",component:q}]]},[])])})}}]);